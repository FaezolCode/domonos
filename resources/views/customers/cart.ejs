<div class="page checkout">
  <div class="container">
    <div class="cart-checkout-wrapper">
      <div class="cart-menu">
        <% if(session.cart) { %>
        <div class="header">
          <h3><%= session.cart.totalQty %> Items you have selected</h3>
          <a class="explore" href="/">Expore Menus</a>
        </div>
        <div class="cart-items">
          <% for(let cartItem of Object.values(session.cart.items) ){ %>

          <% if(Array.isArray(cartItem)) { %>
          <% cartItem.forEach(pizza => { %>
          <div class="cart-card item">
            <figure>
              <% if(pizza.item.foodType === 'veg') {%> <div class="menu-type veg"></div>
              <% } else {%> <div class="menu-type non-veg"></div>
              <% } %>
              <img src="<%= pizza.item.image %>" alt="">
            </figure>
            <div>
              <div class="info">
                <div class="details">
                  <h2> <%= pizza.item.name %> </h2>
                  <p><%= pizza.item.description %></p>
                  <div class="more">
                    <span><%= pizza.item.size %> </span>
                    <span><%= pizza.item.crust %></span>
                  </div>
                </div>
                <div class="price-q">
                  <h5>&#8377; <%= pizza.item.price * pizza.qty %></h5>
                  <div class="quantity-control">
                    <button type="button" class="less">
                      <% if(pizza.qty === 1) { %>
                      <span class="material-icons">
                        delete_outline
                      </span>
                      <% } else { %>
                      <span class="material-icons">
                        remove
                      </span>
                      <% } %>
                    </button>
                    <p><%= pizza.qty %> </p>
                    <button type="button" class="more">
                      <span class="material-icons">
                        add
                      </span>
                    </button>
                  </div>
                </div>
              </div>
              <% if(pizza.item.extra) { %>
              <div class="custom">
                <span>Your Customization</span>
                <p> <strong>Added topping:</strong> Extra Cheese</p>
              </div>
              <% } %>
            </div>
          </div>
          <%})%>
          <%} else { %>
          <div class="cart-card item">
            <figure>
              <% if(cartItem.item.foodType === 'veg') {%> <div class="menu-type veg"></div>
              <% } else {%> <div class="menu-type non-veg"></div>
              <% } %>
              <img src="<%= cartItem.item.image %>" alt="">
            </figure>
            <div>
              <div class="info">
                <div class="details">
                  <h2><%= cartItem.item.name %> </h2>
                  <p><%= cartItem.item.description %></p>
                </div>
                <div class="price-q">
                  <h5>&#8377; <%= cartItem.item.price * cartItem.qty %></h5>
                  <div class="quantity-control">
                    <button type="button" class="less">
                      <% if(cartItem.qty === 1) { %>
                      <span class="material-icons">
                        delete_outline
                      </span>
                      <% } else { %>
                      <span class="material-icons">
                        remove
                      </span>
                      <% } %>
                    </button>
                    <p><%= cartItem.qty %> </p>
                    <button type="button" class="more">
                      <span class="material-icons">
                        add
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <% }} %>
        </div>
        <div class="additional-menu">
          <div class="header">
            <h3>Complete your meal</h3>
          </div>
          <div class="meals">
            <div class="wrapper">
              <div class="menu-grid">
                <% menus.map(menu => { %>
                <div class="additional-menu-item">
                  <figure>
                    <% if(menu.foodType === 'veg') {%> <div class="menu-type veg"></div>
                    <% } else {%> <div class="menu-type non-veg"></div>
                    <% } %>
                    <img src="<%= menu.image %>" alt="">
                    <div class="overlay">
                      <div><%= menu.name %> <br>&#8377; <%= menu.price %> </div>
                    </div>
                  </figure>
                  <div class="footer">
                    <button class="btn btn-sm" type="button">
                      Add
                    </button>
                  </div>
                </div>
                <% }) %>
              </div>
            </div>
          </div>
        </div>
        <% } else { %>
        <div class="empty-cart">
          <div class="content">
            <img src="/images/cart_empty.png" alt="">
            <h2>YOUR CART IS EMPTY
              <small>
                Please add some items from the menu.
              </small>
            </h2>
            <p>
              <a href="/" class="btn">explore Menu</a>
            </p>
          </div>
        </div>
        <%} %>
      </div>
      <div class="side-menu">
        <div class="checkout-preview" id="checkoutMenu">
          <div class="header">
            <h3>Choose a delivery address</h3>
          </div>
          <div class="cart-card">
            <div class="location">
              <div class="icon">
                <span class="material-icons">
                  room
                </span>
              </div>
              <div class="text">
                <p><span>Select Location</span>
                  <small>Please select location, so that we can find a restaurant that delivers to
                    you!</small>
                </p>
                <div class="btns">
                  <button class="btn btn-md">Add Location</button>
                </div>
              </div>
            </div>
            <div class="saved-address">
              <div class="info">
                <span class="material-icons">
                  room
                </span>
                <p>Login to use your saved addresses</p>
                <button class="btn btn-sm">My Address</button>
              </div>
            </div>
          </div>
          <div class="header">
            <h3>Offers</h3>
          </div>
          <div class="cart-card">
            <div class="redeem">
              <div class="icon">
                <span class="material-icons">
                  redeem
                </span>
              </div>
              <div class="text">
                <p>Select offer / Apply coupon <small>Get discount with you order</small></p>
              </div>
              <div class="icon">
                <span class="material-icons">
                  arrow_forward_ios
                </span>
              </div>
            </div>
          </div>
          <% if(session.cart) { %>
          <div class="header">
            <h3>Price Details</h3>
          </div>
          <div class="cart-card price">
            <dl>
              <dt>Sub Total</dt>
              <dd>&#8377; <%= session.cart.totalPrice %></dd>
              <dt>Tax</dt>
              <dd>-</dd>
              <dt>Discount</dt>
              <dd>-</dd>
              <dt>Delivery</dt>
              <dd>0</dd>
            </dl>
            <dl>
              <dt>Grand Total</dt>
              <dd>&#8377; <%= session.cart.totalPrice %></dd>
            </dl>
            <div class="cta">
              <button class="btn" type="button">Place Order</button>
            </div>
          </div>
          <% } %>
        </div>
      </div>
    </div>
  </div>
</div>